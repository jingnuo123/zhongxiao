(function(i,f){var p=("createTouch" in document)||("ontouchstart" in i),m=document.createElement("div").style,g=(function(){var s={OTransform:["-o-","otransitionend"],WebkitTransform:["-webkit-","webkitTransitionEnd"],MozTransform:["-moz-","transitionend"],msTransform:["-ms-","MSTransitionEnd"],transform:["","transitionend"]},t;for(t in s){if(t in m){return s[t]}}return false})(),r=[["width","left","right"],["height","top","bottom"]],q=g&&g[0],k=function(s){return(s+"").replace(/^-ms-/,"ms-").replace(/-([a-z]|[0-9])/ig,function(t,u){return(u+"").toUpperCase()})},n=function(t){var s=k(q+t);return(t in m)&&t||(s in m)&&s},d=function(s,u){for(var t in u){if(typeof s[t]=="undefined"){s[t]=u[t]}}return s},e=function(v){var u=v.children||v.childNodes,t=[],s=0;for(;s<u.length;s++){if(u[s].nodeType===1){t.push(u[s])}}return t},c=function(s,v){var u=0,t=s.length;for(;u<t;u++){if(v.call(s[u],u,s[u])===false){break}}},j=function(s){s=h.fn.eventHook(s);s.preventDefault()},o=p?"touchstart":"mousedown",b=p?"touchmove":"mousemove",l=p?"touchend":"mouseup",a=g[1]||"",h=function(t,s){if(!(this instanceof h)){return new h(t,s)}if(typeof t!="string"&&!t.nodeType){s=t;t=s.id}if(!t.nodeType){t=document.getElementById(t)}this.cfg=d(s||{},this._default);this.element=t;if(this.element){this.container=this.element.parentNode||document.body;this.setup()}};h.fn=h.prototype={_default:{id:"slider",begin:0,auto:true,speed:600,timeout:5000,direction:"left",align:"center",fixWidth:true,mouseWheel:false,before:new Function,after:new Function},css:function(v,t){if(typeof t=="string"){var u=document.defaultView&&document.defaultView.getComputedStyle&&getComputedStyle(v,null)||v.currentStyle||v.style||{};return u[k(t)]}else{var w,s;for(w in t){if(w=="float"){s=("cssFloat" in m)?"cssFloat":"styleFloat"}else{s=k(w)}v.style[s]=t[w]}}},addListener:function(t,w,v,s){if(t.addEventListener){t.addEventListener(w,v,s);return true}else{if(t.attachEvent){t.attachEvent("on"+w,v);return true}}return false},removeListener:function(t,w,v,s){if(t.addEventListener){t.removeEventListener(w,v,s);return true}else{if(t.attachEvent){t.detachEvent("on"+w,v);return true}}return false},eventHook:function(u){var t={},v="changedTouches touches scale target view which clientX clientY fromElement offsetX offsetY pageX pageY toElement".split(" ");u=u||i.event;c(v,function(){t[this]=u[this]});t.target=u.target||u.srcElement||document;if(t.target.nodeType===3){t.target=t.target.parentNode}t.preventDefault=function(){u.preventDefault&&u.preventDefault();t.returnValue=u.returnValue=false};t.stopPropagation=function(){u.stopPropagation&&u.stopPropagation();t.cancelBubble=u.cancelBubble=true};if(p&&t.touches.length){t.pageX=t.touches.item(0).pageX;t.pageY=t.touches.item(0).pageY}else{if(typeof u.pageX=="undefined"){var w=document.documentElement,s=document.body;t.pageX=u.clientX+(w&&w.scrollLeft||s&&s.scrollLeft||0)-(w&&w.clientLeft||s&&s.clientLeft||0);t.pageY=u.clientY+(w&&w.scrollTop||s&&s.scrollTop||0)-(w&&w.clientTop||s&&s.clientTop||0)}}t.origEvent=u;return t},bind:function(s,t){return function(){return s.apply(t,arguments)}},setup:function(){this.slides=e(this.element);this.length=this.slides.length;this.cfg.timeout=parseInt(this.cfg.timeout);this.cfg.speed=parseInt(this.cfg.speed);this.cfg.begin=parseInt(this.cfg.begin);this.cfg.auto=!!this.cfg.auto;this.cfg.timeout=Math.max(this.cfg.timeout,this.cfg.speed);this.touching=!!p;this.css3transition=!!g;this.index=this.cfg.begin<0||this.cfg.begin>=this.length?0:this.cfg.begin;if(this.length<1){return false}switch(this.cfg.direction){case"up":case"down":this.direction=this.cfg.direction;this.vertical=1;break;case"right":this.direction="right";default:this.direction=this.direction||"left";this.vertical=0;break}this.addListener(this.element,o,this.bind(this._start,this),false);this.addListener(document,b,this.bind(this._move,this),false);this.addListener(document,l,this.bind(this._end,this),false);this.addListener(document,"touchcancel",this.bind(this._end,this),false);this.addListener(this.element,a,this.bind(this.transitionend,this),false);this.addListener(i,"resize",this.bind(function(){clearTimeout(this.resizeTimer);this.resizeTimer=setTimeout(this.bind(this.resize,this),100)},this),false);if(this.cfg.mouseWheel){this.addListener(this.element,"mousewheel",this.bind(this.mouseScroll,this),false);this.addListener(this.element,"DOMMouseScroll",this.bind(this.mouseScroll,this),false)}this.playing=this.cfg.auto;this.resize()},getSum:function(w,x,s){var v=0,u=x,t=k("-"+w);for(;u<s;u++){v+=this["getOuter"+t](this.slides[u])}return v},getPos:function(w,u){var t=k("-"+w),s=this.getSum(w,u,u+1),v=this.getSum(w,0,u)+this["getOuter"+t](this.element)/2-this["get"+t](this.element)/2;switch(this.cfg.align){case"left":return -v;case"right":return this[w]-s-v;default:return(this[w]-s)/2-v}},resize:function(){clearTimeout(this.aniTimer);var w=this,t,u=r[this.vertical][0],s=k("-"+u),v=this.css(this.container,"position");this.css(this.container,{overflow:"hidden",visibility:"hidden",listStyle:"none",position:v=="static"?"relative":v});this[u]=this["get"+s](this.container);t={"float":this.vertical?"none":"left",display:"block"};c(this.slides,function(){if(w.cfg.fixWidth){t[u]=w[u]-w["margin"+s](this)-w["padding"+s](this)-w["border"+s](this)+"px"}w.css(this,t)});this.total=this.getSum(u,0,this.length);t={position:"relative",overflow:"hidden"};t[q+"transition-duration"]="0ms";t[u]=this.total+"px";t[r[this.vertical][1]]=this.getPos(u,this.index)+"px";this.css(this.element,t);this.css(this.container,{visibility:"visible"});this.playing&&this.play();return this},slide:function(A,w){var E=r[this.vertical][1],C=r[this.vertical][0],B=n("transition"),F=parseFloat(this.css(this.element,E))||0,t,y={},D,G=this.getSum(C,A,A+1);A=Math.min(Math.max(0,A),this.length-1);w=typeof w=="undefined"?this.cfg.speed:parseInt(w);t=this.getPos(C,A);D=t-F,w=Math.abs(D)<G?Math.ceil(Math.abs(D)/G*w):w;if(B){y[B]=E+" ease "+w+"ms";y[E]=t+"px";this.css(this.element,y)}else{var z=this,u=0,v=w/10,s=function(I,H,K,J){return -K*((I=I/J-1)*I*I*I-1)+H},x=function(){if(u<v){u++;z.element.style[E]=Math.ceil(s(u,F,D,v))+"px";z.aniTimer=setTimeout(x,10)}else{z.element.style[E]=t+"px";z.transitionend({propertyName:E})}};clearTimeout(this.aniTimer);x()}this.cfg.before.call(this,A,this.slides[this.index]);this.index=A;return this},play:function(){clearTimeout(this.timer);this.playing=true;this.timer=setTimeout(this.bind(function(){this.direction=="left"||this.direction=="up"?this.next():this.prev()},this),this.cfg.timeout);return this},pause:function(){clearTimeout(this.timer);this.playing=false;return this},stop:function(){this.pause();return this.slide(0)},prev:function(u,t){clearTimeout(this.timer);var s=this.index;u=typeof u=="undefined"?u=1:u%this.length;s-=u;if(t===false){s=Math.max(s,0)}else{s=s<0?this.length+s:s}return this.slide(s)},next:function(u,t){clearTimeout(this.timer);var s=this.index;if(typeof u=="undefined"){u=1}s+=u;if(t===false){s=Math.min(s,this.length-1)}else{s%=this.length}return this.slide(s)},_start:function(s){s=this.eventHook(s);if(!this.touching){s.preventDefault()}this.removeListener(this.element,"click",j);this.startPos=[s.pageX,s.pageY];this.element.style[k(q+"transition-duration")]="0ms";this.startTime=+new Date;this._pos=parseFloat(this.css(this.element,r[this.vertical][1]))||0},_move:function(s){if(!this.startPos||s.scale&&s.scale!==1){return}s=this.eventHook(s);this.stopPos=[s.pageX,s.pageY];var u=r[this.vertical][1],t=r[this.vertical][0],v=this.stopPos[this.vertical]-this.startPos[this.vertical];if(this.scrolling||typeof this.scrolling=="undefined"&&Math.abs(v)>=Math.abs(this.stopPos[1-this.vertical]-this.startPos[1-this.vertical])){s.preventDefault();v=v/((!this.index&&v>0||this.index==this.length-1&&v<0)?(Math.abs(v)/this[t]+1):1);this.element.style[u]=this._pos+v+"px";if(v&&typeof this.scrolling=="undefined"){this.scrolling=true;clearTimeout(this.timer);clearTimeout(this.aniTimer)}}else{this.scrolling=false}},_end:function(C){if(this.startPos){if(this.scrolling){var A=r[this.vertical][0],B=r[this.vertical][1],x=this.stopPos[this.vertical]-this.startPos[this.vertical],z=Math.abs(x),s=z/x,t,w,u,y=this.index,v=0;this.addListener(this.element,"click",j);if(z>20){w=parseFloat(this.css(this.element,r[this.vertical][1]));do{if(y>=0&&y<this.length){u=this.getPos(A,y);t=this.getSum(A,y,y+1)}else{y+=s;break}}while(Math.abs(u-w)>t/2&&(y-=s));v=Math.abs(y-this.index);if(!v&&+new Date-this.startTime<250){v=1}}x>0?this.prev(v,false):this.next(v,false);this.playing&&this.play()}delete this._pos;delete this.stopPos;delete this.startPos;delete this.scrolling;delete this.startTime}},mouseScroll:function(u){if(this.cfg.mouseWheel){u=this.eventHook(u);u.preventDefault();var s=u.origEvent;var v=s.wheelDelta||s.detail&&s.detail*-1||0,t=v/Math.abs(v);v>0?this.prev(1,false):this.next(1,false)}},transitionend:function(s){if(s.propertyName==r[this.vertical][1]){this.cfg.after.call(this,this.index,this.slides[this.index]);this.playing&&this.play()}}};c(["Width","Height"],function(t,u){var s=u.toLowerCase();c(["margin","padding","border"],function(w,v){h.fn[v+u]=function(x){return parseFloat(this.css(x,v+"-"+r[t][1]+(v=="border"?"-width":"")))+parseFloat(this.css(x,v+"-"+r[t][2]+(v=="border"?"-width":"")))}});h.fn["get"+u]=function(v){return v["offset"+u]-this["padding"+u](v)-this["border"+u](v)};h.fn["getOuter"+u]=function(v){return v["offset"+u]+this["margin"+u](v)}});i.TouchSlider=h})(window);